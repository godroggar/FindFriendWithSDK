{"version":3,"sources":["TTRecorder.js"],"names":["TTRecorder","isSave","recorder","tt","getGameRecorderManager","onStart","console","log","res","changeState","onStop","clipVideo","r","videoPath","onResume","onPause","onError","timeRange","func","path","success","fail","recordClip","index","isOpen","start","duration","isClose","stop","pause","resume","BaseRecorder"],"mappings":";;;;;;;;;;;;;AAAA;;;;;;;;;;;;IACqBA;;;AAGjB,0BAAc;AAAA;;AAAA;;AAAA,cADdC,MACc,GADL,IACK;;AAEV,cAAKC,QAAL,GAAgBC,GAAGC,sBAAH,EAAhB;AACA,cAAKF,QAAL,CAAcG,OAAd,CAAsB,eAAO;AACzBC,oBAAQC,GAAR,CAAY,MAAZ,EAAoBC,GAApB;AACA,kBAAKC,WAAL,CAAiB,CAAjB;AACA;AACH,SAJD;AAKA,cAAKP,QAAL,CAAcQ,MAAd,CAAqB,eAAO;AACxB;AACA;AACAJ,oBAAQC,GAAR,CAAY,MAAZ,EAAoBC,GAApB;AACA,kBAAKG,SAAL,CAAeH,GAAf,EAAoB,CAAC,EAAD,EAAK,CAAL,CAApB,EAA6B,UAACI,CAAD,EAAO;AAChC,oBAAIA,CAAJ,EAAO;AACH;AACA,0BAAKC,SAAL,GAAiBD,EAAEC,SAAnB;AACA;AACH,iBAJD,MAIO;AACH,0BAAKA,SAAL,GAAiB,IAAjB;AACH;;AAED,sBAAKJ,WAAL,CAAiB,CAAjB;AACH,aAVD;AAWH,SAfD;;AAiBA,cAAKP,QAAL,CAAcY,QAAd,CAAuB,YAAM;AACzBR,oBAAQC,GAAR,CAAY,qBAAZ;AACH,SAFD;AAGA,cAAKL,QAAL,CAAca,OAAd,CAAsB,YAAM;AACxBT,oBAAQC,GAAR,CAAY,oBAAZ;AACH,SAFD;;AAIA,cAAKL,QAAL,CAAcc,OAAd,CAAsB,UAACR,GAAD,EAAS;AAC3BF,oBAAQC,GAAR,CAAY,oBAAZ;AACA,kBAAKM,SAAL,GAAiB,IAAjB;AACH,SAHD;AAhCU;AAoCb;;;;kCAGSL,KAAKS,WAAWC,MAAM;AAC5B,iBAAKhB,QAAL,CAAcS,SAAd,CAAwB;AACpBQ,sBAAMX,IAAIK,SADU;AAEpBI,2BAAWA,SAFS;AAGpBG,yBAAS,iBAACR,CAAD,EAAO;AACZN,4BAAQC,GAAR,CAAYK,EAAEC,SAAd;AACAK,yBAAKN,CAAL;AACH,iBANmB;AAOpBS,sBAAM,gBAAM;AACRH,yBAAK,IAAL;AACH;AATmB,aAAxB;AAWH;;;mCAGUA,MAAM;AACb,iBAAKhB,QAAL,CAAcoB,UAAd,CAAyB;AACrBL,2BAAW,CAAC,EAAD,EAAK,CAAL,CADU;AAErBG,yBAAS,iBAACR,CAAD,EAAO;AACZN,4BAAQC,GAAR,CAAYK,EAAEW,KAAd,EADY,CACU;;AAEtBL,yBAAKN,CAAL;AACH;AANoB,aAAzB;AAQH;;;gCAEO;AACJN,oBAAQC,GAAR,CAAY,kBAAZ,EAA+B,KAAKiB,MAAL,EAA/B;AACA,gBAAG,KAAKA,MAAL,EAAH,EAAiB;AACb;AACH;AACD;AACA,iBAAKtB,QAAL,CAAcuB,KAAd,CAAoB;AAChBC,0BAAU;AADM,aAApB;AAGH;;;+BAGoB;AAAA,gBAAhBzB,MAAgB,uEAAP,KAAO;;AACjBK,oBAAQC,GAAR,CAAY,iBAAZ,EAA8B,KAAKoB,OAAL,EAA9B,EAA6C1B,MAA7C;AACA,gBAAG,KAAK0B,OAAL,EAAH,EAAkB;AACd;AACH;AACD;AACA,iBAAK1B,MAAL,GAAcA,MAAd;AACA,iBAAKC,QAAL,CAAc0B,IAAd;AACH;;;gCACO;AACJ,iBAAK1B,QAAL,CAAc2B,KAAd;AACH;;;iCAEQ;AACL,iBAAK3B,QAAL,CAAc4B,MAAd;AACH;;;;EA/FmCC;;kBAAnB/B","file":"TTRecorder.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SDK\\tt","sourcesContent":["import BaseRecorder from \"../base/BaseRecorder\";\nexport default class TTRecorder extends BaseRecorder {\n\n    isSave = true;\n    constructor() {\n        super();\n        this.recorder = tt.getGameRecorderManager();\n        this.recorder.onStart(res => {\n            console.log('录屏开始', res);\n            this.changeState(1)\n            // do somethine;\n        })\n        this.recorder.onStop(res => {\n            // console.log(res.videoPath);\n            // do somethine;\n            console.log('录屏结束', res);\n            this.clipVideo(res, [15, 0], (r) => {\n                if (r) {\n                    // if (this.isSave) {\n                    this.videoPath = r.videoPath\n                    // }\n                } else {\n                    this.videoPath = null;\n                }\n\n                this.changeState(0)\n            })\n        })\n\n        this.recorder.onResume(() => {\n            console.log('TTRecorder onResume');\n        })\n        this.recorder.onPause(() => {\n            console.log('TTRecorder onPuase');\n        })\n\n        this.recorder.onError((res) => {\n            console.log('TTRecorder onPuase');\n            this.videoPath = null;\n        })\n    }\n\n\n    clipVideo(res, timeRange, func) {\n        this.recorder.clipVideo({\n            path: res.videoPath,\n            timeRange: timeRange,\n            success: (r) => {\n                console.log(r.videoPath);\n                func(r)\n            },\n            fail: () => {\n                func(null)\n            }\n        })\n    }\n\n\n    recordClip(func) {\n        this.recorder.recordClip({\n            timeRange: [15, 0],\n            success: (r) => {\n                console.log(r.index)  // 裁剪唯一索引\n\n                func(r)\n            }\n        })\n    }\n\n    start() {\n        console.log(' recorder start ',this.isOpen())\n        if(this.isOpen()){\n            return;\n        }\n        // this.changeState(ItemState.GOT)\n        this.recorder.start({\n            duration: 300,\n        })\n    }\n\n\n    stop(isSave = false) {\n        console.log(' recorder stop ',this.isClose(),isSave)\n        if(this.isClose()){\n            return;\n        }\n        // this.changeState(ItemState.NOT_GET)\n        this.isSave = isSave;\n        this.recorder.stop();\n    }\n    pause() {\n        this.recorder.pause();\n    }\n\n    resume() {\n        this.recorder.resume();\n    }\n\n}\n"]}