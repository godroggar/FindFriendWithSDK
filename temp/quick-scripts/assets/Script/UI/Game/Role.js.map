{"version":3,"sources":["Role.js"],"names":["HexCell","require","cc","Class","extends","Component","properties","bg","default","type","Node","die","arrowNode","leftNode","rightNode","bottomNode","topNode","_axialCoordinate","v2","visible","axialCoordinate","get","set","val","x","y","gameView","darkNode","onLoad","start","init","active","onCollisionEnter","other","self","node","opacity","collisionCallback","setDark","isDark","setArrow","t","l","d","r","hideArrow","playDie","cb","setContentSize","size","blinking","scheduleOnce","runAction","fadeOut","a1","delayTime","a2","a3","a4","fadeIn","b1","callFunc","seq","repeat","sequence","stopAllActions","moveTo"],"mappings":"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","file":"Role.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\Game","sourcesContent":["var HexCell = require(\"./HexCell\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        bg:{\n            default:null,\n            type:cc.Node,\n        },\n        die:{\n            default:null,\n            type:cc.Node,\n        },\n        arrowNode:{\n            default:null,\n            type:cc.Node,\n        },\n        leftNode:{\n            default:null,\n            type:cc.Node,\n        },\n        rightNode:{\n            default:null,\n            type:cc.Node,\n        },\n        bottomNode:{\n            default:null,\n            type:cc.Node,\n        },\n        topNode:{\n            default:null,\n            type:cc.Node,\n        },\n        _axialCoordinate:{\n            default:cc.v2(0,0),\n            visible:false,\n        },\n        axialCoordinate:{\n            get(){\n                return this._axialCoordinate;\n            },\n            set(val){\n                this._axialCoordinate = cc.v2(val.x,val.y);\n            },\n        },\n        gameView:{\n            default:null\n        },\n        darkNode:{\n            default:null,\n            type:cc.Node,\n        },\n\n    },  \n\n    onLoad: function () {\n\n    },\n\n    start () {\n\n    },\n\n    init(){\n        this.bg.active = true;\n        this.die.active = false;\n        //cc.log(\"#######################-----------caretor role\");\n    },\n\n    onCollisionEnter: function (other, self) {\n        if(this.gameView != null){\n            //cc.log(\"other.node:\",other.node)\n            //cc.log(\"other.node.opacity:\",other.node.opacity)\n            if(other.node != null && other.node.opacity > 0 && other.node.active){\n                this.gameView.collisionCallback();    \n            }\n            \n        }\n    },\n\n    setDark(isDark){\n        this.darkNode.active = isDark;\n    },\n\n\n    /**\n    * 显示箭头\n    */\n    setArrow(t,l,d,r)\n    {\n        //寻找\n        this.topNode.active = t;\n        this.bottomNode.active = d;\n        this.leftNode.active = l;\n        this.rightNode.active = r;\n\n        this.arrowNode.active = true;\n    },\n\n    hideArrow(){\n        this.arrowNode.active = false;\n    },\n    \n    /**\n    * 死亡\n    */\n    playDie(cb)\n    {\n        var self = this;\n        this.bg.active = true;\n        this.die.active = false;\n        this.die.setContentSize(cc.size(100, 100));\n\n        this.blinking(this.bg,function(){\n            self.bg.active = false;\n            self.die.active = true;\n            self.blinking(self.die,function(){\n                self.die.setContentSize(cc.size(180, 180));                \n                self.blinking(self.die,function(){\n                    self.scheduleOnce(function(){\n                        self.die.runAction(cc.fadeOut(0.2));\n                    }, 0.1)\n                });\n            });\n        });\n    },\n\n    blinking(node,cb){\n        var a1 = cc.delayTime(0.12);\n        var a2 = cc.fadeOut(0.01);\n        var a3 = cc.delayTime(0.1);\n        var a4 = cc.fadeIn(0.01);\n        var b1 = cc.callFunc(function(){   \n            if(cb){\n                cb();\n            }\n        });\n\n        var seq = cc.repeat(cc.sequence(a1,a2,a3,a4), 2);\n        node.stopAllActions();\n        node.runAction(cc.sequence(seq,b1));\n    },\n\n\n    /**\n    * 移动\n    */\n    moveTo()\n    {\n\n    }\n   \n});\n"]}