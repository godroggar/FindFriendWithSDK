{"version":3,"sources":["TTVideoAd.js"],"names":["TTVideoAd","id","tt","createRewardedVideoAd","rewardedVideoAd","adUnitId","onLoad","onError","console","log","err","ToastController","instance","show","rewardCallback","onClose","state","RewardADState","close","res","isEnded","undefined","BaseRewardAd"],"mappings":";;;;;;;;;;;;;AAEA;;;;;;;;;;;;IAEqBA;;;;;;;;;;;kCAILC,IAAI;AAAA;;AAChB,UAAG,CAACC,GAAGC,qBAAP,EAA6B;AAC3B;AACD;AACD,WAAKC,eAAL,GAAuBF,GAAGC,qBAAH,CAAyB,EAAEE,UAAUJ,EAAZ,EAAzB,CAAvB;AACA,UAAI,KAAKG,eAAT,EAA0B;AACxB,aAAKA,eAAL,CAAqBE,MAArB,CAA4B,YAAM;AAChC;AACD,SAFD;AAGA,aAAKF,eAAL,CAAqBG,OAArB,CAA6B,eAAO;;AAElCC,kBAAQC,GAAR,CAAYC,GAAZ;AACAC,0BAAgBC,QAAhB,GAA2BC,IAA3B,CAAgC,eAAhC;AACA,cAAI,OAAKC,cAAT,EAAyB;AACvB,mBAAKA,cAAL,CAAoB,KAApB;AACD;AACF,SAPD;AAQA,aAAKV,eAAL,CAAqBW,OAArB,CAA6B,eAAO;AAClC;AACA;AACA,iBAAKC,KAAL,GAAaC,6BAAcC,KAA3B;AACA;AACA;AACA;AACA,cAAIC,OAAOA,IAAIC,OAAX,IAAsBD,QAAQE,SAAlC,EAA6C;AAC3C;AACA,gBAAI,OAAKP,cAAT,EAAyB;AACvB,qBAAKA,cAAL,CAAoB,IAApB;AACD;AAEF,WAND,MAMO;AACL;AACA,gBAAI,OAAKA,cAAT,EAAyB;AACvB,qBAAKA,cAAL,CAAoB,KAApB;AACA;AACD;AAEF;AACF,SArBD;AAsBD;AAEF;;;;EA7CoCQ;;kBAAlBtB","file":"TTVideoAd.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SDK\\tt","sourcesContent":["\n\nimport BaseRewardAd, { RewardADState } from \"../base/BaseRewardAd\";\n\nexport default class TTVideoAd extends BaseRewardAd {\n\n\n\n  createVideoAd(id) {\n    if(!tt.createRewardedVideoAd){\n      return;\n    }\n    this.rewardedVideoAd = tt.createRewardedVideoAd({ adUnitId: id })\n    if (this.rewardedVideoAd) {\n      this.rewardedVideoAd.onLoad(() => {\n        // this.loadFinish = true\n      })\n      this.rewardedVideoAd.onError(err => {\n\n        console.log(err)\n        ToastController.instance().show('视频加载失败，无法获得奖励')\n        if (this.rewardCallback) {\n          this.rewardCallback(false)\n        }\n      })\n      this.rewardedVideoAd.onClose(res => {\n        // this.resume()\n        // GlobalEvent.instance().resume();\n        this.state = RewardADState.close;\n        // this.publish(RewardADState.close)\n        // 用户点击了【关闭广告】按钮\n        // 小于 2.1.0 的基础库版本，res 是一个 undefined\n        if (res && res.isEnded || res === undefined) {\n          // 正常播放结束，可以下发游戏奖励\n          if (this.rewardCallback) {\n            this.rewardCallback(true)\n          }\n\n        } else {\n          // 播放中途退出，不下发游戏奖励\n          if (this.rewardCallback) {\n            this.rewardCallback(false);\n            // ToastController.instance().intoLayer('ui.not_finish');\n          }\n\n        }\n      })\n    }\n\n  }\n\n}\n"]}