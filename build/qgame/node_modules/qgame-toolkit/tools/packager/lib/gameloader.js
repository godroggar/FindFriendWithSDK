"use strict";var _utils=require("./utils"),_parser=require("./parser"),_shared=require("./shared");module.exports=function(e,r){var a=this;this.cacheable&&this.cacheable();var t=this.async();(0,_parser.parseScript)(e).then(function(e){var c=e.parsed,i=(0,_shared.updateSourceScript)(c);c=i.fileCont,(0,_utils.logWarn)(a,i.logFeatureList);var p=c.match(/require\s*\(['"]@([^()]+?)['"]\)/g);p&&p.length>0&&p.forEach(function(e){c=c.replace(e,e.replace("require","$app_require$").replace("@","@app-module/"))});var s=c.match(/import\s+([^()]+?)\s+from\s+['"]@([^()]+?)['"]/g);s&&s.length>0&&s.forEach(function(e){c=c.replace(e,e.replace("import","var").replace("from","= $app_require$(").replace("@","@app-module/")+");")}),t(null,c,r)}).catch(function(e){t(e,"")})};